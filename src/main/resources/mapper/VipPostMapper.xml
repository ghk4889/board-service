<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mygroup.boardservice.board.adapter.out.persistence.mapper.VipPostMapper">

    <resultMap id="PostResultMap" type="VipPost">
        <constructor>
            <idArg column="id" javaType="long" />
            <arg column="title" javaType="String" />
            <arg column="content" javaType="String"/>
            <arg column="writer" javaType="String" />
            <arg column="view_count" javaType="long"/>
            <arg column="created_date" javaType="java.sql.Date"/>
            <arg column="modified_date" javaType="java.sql.Date"/>
            <arg resultMap="UserResultMap" javaType="User"/>
        </constructor>
    </resultMap>

    <resultMap id="UserResultMap" type="User">
        <constructor>
            <idArg column="id" javaType="long"/>
            <arg column="email" javaType="string"/>
            <arg column="nickname" javaType="string"/>
            <arg column="created_date" javaType="java.sql.Date"/>
            <arg column="modified_date" javaType="java.sql.Date"/>
            <arg column="grade" javaType="Grade"/>
        </constructor>
    </resultMap>


    <select id="findById" parameterType="Long" resultMap="PostResultMap" >
        SELECT vp.id, vp.title, vp.content, vp.writer, vp.view_count, vp.created_date, vp.modified_date
                , u.id, u.email, u.nickname, u.created_date, u.modified_date, u.grade
        FROM vip_post vp, user u
        where vp.id = #{id} and vp.writer = u.nickname ;
    </select>


<!--
    <insert id="save" parameterType="Item" useGeneratedKeys="true" keyProperty="itemId" >
        INSERT INTO item(item_name, price, quantity)
        VALUES (#{itemName}, #{price}, #{quantity})
    </insert>

    <select id="findAll" resultMap="itemResultMap" >
        SELECT item_id, item_name, price, quantity
        from item
    </select>

    <update id="update" parameterType="Item" >
        UPDATE item
        SET item_name = #{itemName},
            price = #{price},
            quantity = #{quantity}
        WHERE item_id = #{itemId};
    </update>
-->
</mapper>